---
import Layout from '../layouts/Layout.astro';
import data from '../../public/data.json';
import '../../assets/scss/astro-ecommerce.scss';
import Navbar from '../components/navbar';
import UpperNavbar from '../components/store/upperNavbar';
import CardProduct from '../components/products/cardProduct';
import ShoppingCart from '../components/cart/shoppingCart';
import StoreDoubleColumn from '../components/store/storeDoubleColumn';

let cartItems = [];
data.shoppingCart.map(id => 
  data.products.filter(x => x.id == id).map(x => cartItems.push(x))
)

 const cartList = {
    "issuccess": true,
    "data": 1,
    "Items": [
        {
            "itemcode": 1,
            "itemname": "Almond Basic",
            "imageurl": "https://www.acinuts.com/intime_images/ACI_2.jpeg",
            "qty": 2,
            "selectedCategory": "100 gm",
            "price": "100.00"
        },
        {
            "itemcode": 1,
            "itemname": "Almond Basic",
            "imageurl": "https://www.acinuts.com/intime_images/ACI_2.jpeg",
            "qty": 1,
            "selectedCategory": "1 kg",
            "price": "900.00"
        },
        {
            "itemcode": 45,
            "itemname": "Amla Dry - Sweet",
            "imageurl": "https://www.omgtechminds.com/ACINUTS/ACI_22.jpeg",
            "qty": 1,
            "selectedCategory": "100 gm",
            "price": "50.00"
        }
    ],
    "userdetail": {
        "referredBy": 0,
        "Referral_Offer_Applicable": false,
        "refer_table_update": false,
        "Discount_Amount": 0,
        "is_first_order": false
    }
}

---

<Layout title="Shopping Cart">
	<main>
    <Navbar />

    <ShoppingCart products = {cartList.Items}/>
    {/*
    <div class="container mt-5">
      <div class="row">
        <h5 class="mb-4">You may also like...</h5>
        {data.products.map(product => 
          <div class="col-md-6 col-lg-3">
            <CardProduct 
              thumb_src = {product.thumb_src}
              thumb_alt = {product.thumb_alt}
              color = {product.color}
              title = {product.title}
              price = {product.price}
              position = "left"
            />
          </div>
        )}        
      </div>
      <hr class="dark horizontal my-5" />
      <StoreDoubleColumn />
    </div>
    */}
  </main>

</Layout>